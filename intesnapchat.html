<!DOCTYPE html>
  <head>
    <title>KaggeChat</title>
    <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBfNTrX31DWEAeXbrJ_BrjpTNofMuDjdJ0",
    authDomain: "kaggechat.firebaseapp.com",
    databaseURL: "https://kaggechat-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "kaggechat",
    storageBucket: "kaggechat.appspot.com",
    messagingSenderId: "506666632993",
    appId: "1:506666632993:web:060270741cbc7e43e26060",
    measurementId: "G-M4VBBE7B2N"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
      const db = firebase.database();
const username = prompt("choose a name");
function sendMessage(e) {
  e.preventDefault();
  const timestamp = Date.now();
  const msgInput = document.getElementById("msgInput");
  const message = msgInput.value;
  messageInput.value = "";

  document
    .getElementById("messages")
   .scrollIntoView({ behavior: "smooth", block: "end", inline: "nearest" });

  db.ref("messages/" + timestamp).set({
    username,
    message,
  });
}

const fetchChat = db.ref("messages/");

fetchChat.on("child_added", function (snapshot) {
 const messages = snapshot.val();
  const message = `<li class=${ 
    username === messages.username ? "sent" : "receive"
  }><span>${messages.username}: </span>${messages.message}</li>;
 document.getElementById("messages").innerHTML += message;
});
      
</script>
  </head>
  <body>
   <ul id="messages"></ul>
   <input id="msgInput" type="text" />
    <button id="submit">Send</button>
    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js"></script>
  </body>
</html>
